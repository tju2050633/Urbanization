# 项目介绍

### 主题

模拟建造虚拟城市,玩家可以建造各种建筑,配置城市的功能区块,并管理城市的发展。



# 模块设计

### 1.地图系统

- 棋盘格，每个单元格是基本操作单位
- 起始随机生成自然地形地图，每个单元格具有地形、地貌等属性
- 玩家点击单元格进行建造操作，如移除地貌、建造区域、建造建筑等

### 2.UI

- Tilemap来生成地图背景层
- 左上角：第一行资源，第二行统计数据
- 右上角：设置按钮
- 左下角：小地图
- 右下角：控制面板，左键点击单元格后弹出
  - 控制面板顶部中显示单元格基本信息
  - 控制面板中下主体分成几个板块：
    - 单元格有地貌，显示地貌并且可以执行「移除XX（地貌）」；没有地貌，该板块disable
    - 单元格有资源，显示资源并且可以执行「收获XX（资源）」；没有资源，该板块disable
    - 单元格没有地貌、没有资源、没有区域，enable该板块，可以执行「建造XX区域」按钮，每种区域一个；有区域，只显示区域信息
    - 没有区域，disable该板块；有区域，显示该区域对应建筑的数量（如3/5，已建造3个、上限5个）及其建造按钮（如有空余）
    - 此外，提供「废弃地块」（只有建造了区域后才enable）和「种植树林」（只有没有地貌才enable）
- 鼠标悬停在单元格上
  - 单元格附近出现信息窗口，简略显示单元格信息

### 3.单元格信息

- 地形
- 地貌（如有）
- 资源（如有）
- 区域（如有）
  - 区域下的建筑（如有）
- 产出：包括资源Asset和统计信息Statistic（若为0则不显示）
  - 食物
  - 住房
  - 金钱
  - 科学水平
  - 文化水平
  - 商业化水平
  - 生产力
- 指标

  - 电力
    - 为建筑产出带来额外增益

  - 军事力量
    - 没什么大用

  - 幸福指数
    - 单元格幸福指数≥100，产出\*1.2；单元格幸福指数≥200，产出\*1.5；单元格幸福指数<0，产出\*0.8；单元格幸福指数≤-100，产出\*0.5

  - 污染指数
    - 单元格污染指数≥100，产出\*0.8；单元格污染指数≥200，产出\*0.5；单元格污染指数≥300，产出\*0.2

### 4.资源系统

> 定义：存量Stock和增量Increment
>
> 存量资源，木材、铜、铁等，只显示当前拥有的数量。如：木材 2000，铜 3000
>
> 增量资源，如食物、生产力、电力，只显示每秒产出的量，如食物 +10，表示食物产出能够满足人口需求，超出程度为10。
>
> 存量+增量资源，如人口，显示存量+增量，如人口 100+0.3，表示现有100人口，每秒增加0.3人口。
>
> 一般来说：
>
> 城市总存量=所有单元格存量之和
>
> 城市总增量=所有单元格增量之和

- 资源Asset：当前玩家收集、生产的资源
  - 人口Population
    - 存量+增量
    - 单元格没有人口信息，人口是城市整体的。增量=食物存量/500
  - 住房Accommodation
    - 存量
  - 食物Food
    - 存量+增量
    - 食物增量=所有单元格食物产出-人口*100
  - 金钱Gold
    - 存量+增量
  - 木材Wood
    - 存量
  - 石材Stone
    - 存量
  - 铜Copper
    - 存量
  - 铁Iron
    - 存量

### 5.数据统计系统

> 所有统计数据都是所有已开发单元格对应属性之和

- 数据统计Statistic
  - 城市化指数Urbanization
    - 综合指标，通过某种算法综合考量以下所有统计数据的结果，是游戏的总分数
  - 科学水平Science
    - 随着不断建造学院区建筑，科技水平提高，能够解锁更多学院区、工业区等建筑
  - 文化水平Culture
    - 随着不断建造娱乐区建筑，文化水平提高，能够解锁更多娱乐区、住宅区等建筑
  - 商业化水平Commercialization
    - 随着不断建造商业区建筑，商业化水平提高，能够解锁更多商业区等建筑
  - 生产力Productivity
    - 随着不断建造工业区建筑，生产力提高，高级建筑都需要更高的生产力来解锁
  - 电力Electricity
    - 所有已开发单元格电力之和，用来计算城市化指数
  - 军事力量MilitaryPower
    - 所有已开发单元格军事力量之和，用来计算城市化指数
  - 幸福指数Happiness
    - 所有已开发单元格幸福指数之和，用来计算城市化指数
  - 污染指数Pollutation
    - 所有已开发单元格污染指数之和，用来计算城市化指数

### 6.单元格自然属性系统

- 地形Terrain
  - 平原Flatlands
  - 丘陵Hill
  - 水域Water
    - 不能建造区域和建筑
- 地貌Feature（非水域单元格）：一个单元格最多存在一种地貌
  - 石头Stone
    - 收获+1000石材
  - 树林Woods
    - 距离≤2单元格污染指数-20
    - 收获+1000木材
  - 雨林Rainforest
    - 距离≤2单元格污染指数-20
    - 收获+500木材、+500食物
- 资源Resource：一个单元格最多存在一种资源
  - 平原
    - 猪Pig
      - 收获+1000食物
    - 羊Sheep
      - 收获+500食物、+500金钱
    - 马Horse
      - 收获+1000金钱
  - 丘陵
    - 铁Iron
      - 收获+1000铁，-100金钱
    - 铜Copper
      - 收获+1000铜，-100金钱
    - 金Gold
      - 收获+5000金钱
  - 水域
    - 鱼Fish
      - 收获+1000食物
    - 螃蟹Crab
      - 收获+500食物、+500金钱
    - 珍珠Pearl
      - 收获+1000金钱

### 7.区域建筑系统

- 区域Zone：一个区域占据一个单元格，区域是建筑的地基，单元格必须有区域才能建造建筑
  - 住宅区ResidentialZone
  - 农业区AgricultureZone
  - 学院区AcademicZone
  - 商业区CommercialZone
  - 工业区IndustrialZone
  - 娱乐区LeisureZone
  - 军事区MilitaryZone
- 所有区域的建造-500金钱、-200木材、-100石材、-100铁

### 8.建筑系统

- 建筑Building：必须基于区域建造，可以为城市带来实际收益。每种区域只能建造特定建筑。每个区域内可以建造多个建筑，但某种特定建筑数量有上限，高级建筑需要一定条件解锁。
- 住宅区建筑
  
  - 贫民窟Slum
    - 初始上限1
    - 无需解锁条件
    - 建造无花费
    - +50住房，距离≤1单元格-30幸福指数，距离≤2的单元格+10污染指数
  - 平房Bungalow
    - 初始上限3
    - 无需解锁条件
    - 建造-100金钱、-100木材、-100石材
    - +10住房，贫民窟上限+2
  - 公寓Apartment
    - 初始上限2
    - 生产力水平≥100、科学水平≥50解锁
    - 建造-200金钱、-200木材、-200石材、-100铁
    - +30住房，平房上限+1
    - 单元格电力≥10，额外+10住房
  - 摩天大楼Skyscraper
    - 初始上限1
    - 生产力水平≥1000、科学水平≥500解锁，单元格电力≥100才能建造
    - 建造-3000金钱、-1000木材、-2000石材、-1000铜、-3000铁
    - +200住房，公寓上限+5
    - 单元格电力≥300，额外+300住房
    - 距离≤1单元格+30幸福指数
  - 别墅Villa
    - 初始上限10
    - 生产力水平≥500、科学水平≥100解锁，污染指数≤-10才能建造
    - 建造-800金钱、-300木材、-300石材、-100铜、-200铁
    - +15住房
    - 距离≤1单元格+100幸福指数
- 农业区建筑
  - 粮仓Granary
    - 初始上限3
    - 无需解锁条件
    - 建造无花费
    - +30食物
  - 农场Farm
    - 初始上限5
    - 无需解锁条件
    - 建造-100金钱、-100木材、-100石材
    - +100食物，粮仓上限+1
    - 污染指数≥50，停止产出
  - 果园Orchard
    - 初始上限5
    - 无需解锁条件
    - 建造-100金钱、-100木材、-100石材
    - +20食物、+4金钱/秒，粮仓上限+1
    - 商业化水平≥500，额外+2金钱/秒
    - 污染指数≥50，停止产出
  - 牧场Ranche
    - 初始上限5
    - 无需解锁条件
    - 建造-100金钱、-100木材、-100石材
    - +40食物、+2金钱/秒，粮仓上限+1
    - 商业化水平≥500，额外+1金钱/秒
    - 污染指数≥50，停止产出
  - 机械化农场MechanizedFarm
    - 初始上限1
    - 科学水平≥500、生产力水平≥500解锁
    - 建造-1000金钱、-300木材、-500石材、-1000铜、-1000铁
    - +500食物，农场上限+5
    - 单元格电力≥200，额外+500食物
  - 机械化果园MechanizedOrchard
    - 初始上限1
    - 科学水平≥500、生产力水平≥500解锁
    - 建造-1000金钱、-300木材、-500石材、-1000铜、-1000铁
    - +100食物、+20金钱/秒，果园上限+5
    - 商业化水平≥500，额外+10金钱/秒
    - 单元格电力≥200，额外+100食物、+20金钱/秒
  - 机械化牧场MechanizedRanche
    - 初始上限1
    - 科学水平≥500、生产力水平≥500解锁
    - 建造-1000金钱、-300木材、-500石材、-1000铜、-1000铁
    - +200食物、+10金钱/秒，牧场上限+5
    - 商业化水平≥500，额外+5金钱/秒
    - 单元格电力≥200，额外+200食物、+10金钱/秒
- 学院区建筑
  - 小学PrimarySchool
    - 初始上限:5
    - 无需解锁条件
    - 建造消耗:-200金钱,-100木材,-100石材
    - +10科技水平
    - 单元格人口≥100时额外:+5科技水平
  - 中学MiddleSchool
    - 初始上限:3
    - 解锁条件:科技水平≥50
    - 建造消耗:-500金钱,-200木材,-200石材
    - +20科技水平，小学上限+1
    - 单元格电力≥200时额外:+10科技水平
  - 大学University
    - 初始上限:2
    - 解锁条件:科技水平≥100、生产力水平≥100、单元格电力≥100
    - 建造消耗:-1000金钱,-500木材,-500石材,-200铜,-200铁
    - +50科技水平，中学上限+2
    - 单元格电力≥500时额外:+20科技水平
  - 军事学院MilitaryCollege
    - 初始上限:1
    - 解锁条件:科技水平≥300，军事水平≥300，生产力水平≥100，单元格电力≥200
    - 建造消耗:-2000金钱,-800木材,-800石材,-500铜,-500铁
    - +20科技水平,+10军事力量，中学上限+2
    - 单元格电力≥500时额外:+10科技水平,+5军事力量
  - 图书馆Library
    - 初始上限:3
    - 解锁条件:科技水平≥150，文化水平≥150
    - 建造消耗:-800金钱,-300木材,-300石材
    - +15科技水平,+10文化水平，小学上限+1，中学上限+1
  - 研究所ResearchInstitute
    - 初始上限:1
    - 解锁条件:科技水平≥500、生产力水平≥300、单元格电力≥500
    - 建造消耗:-3000金钱,-1000木材,-1000石材,-500铜,-500铁
    - +100科技水平，大学上限+3
    - 单元格电力≥1000，额外+100科技水平
- 商业区建筑
  - 集市Market
    - 初始上限:5
    - 无需解锁条件
    - 建造消耗:-100金钱,-50木材,-50石材
    - 效果:+10商业化水平,+10金钱/秒
  - 银行Bank
    - 初始上限:3
    - 解锁条件:商业化水平≥50
    - 建造消耗:-500金钱,-200木材,-200石材
    - 效果:+20商业化水平,+20金钱/秒
  - 公司Company
    - 初始上限:2
    - 解锁条件:商业化水平≥100
    - 建造消耗:-1000金钱,-400木材,-400石材,-100铜,-100铁
    - 效果:+40商业化水平,+50金钱/秒
  - 证券交易所StockExchange
    - 初始上限:1
    - 解锁条件:商业化水平≥300、单元格电力≥100
    - 建造消耗:-2000金钱,-800木材,-800石材,-200铜,-200铁
    - 效果:+60商业化水平,+100金钱/秒，银行上限+3
  - 金融中心FinancialCenter
    - 初始上限:1
    - 解锁条件:商业化水平≥500、生产力水平≥300、电力≥300
    - 建造消耗:-5000金钱,-2000木材,-2000石材,-500铜,-500铁
    - 效果:+100商业化水平,+200金钱/秒，公司上限+5
- 工业区建筑
  - 手工作坊Workshop
    - 初始上限:5
    - 解锁条件:无
    - 建造消耗:-100金钱,-50木材,-50石材
    - 效果:+5生产力
  - 工厂Factory
    - 初始上限:3
    - 解锁条件:生产力≥50
    - 建造消耗:-500金钱,-200木材,-200石材
    - 效果:+10生产力，距离≤3的单元格污染指数+10
  - 电子厂ElectronicsFactory
    - 初始上限:2
    - 解锁条件:生产力≥100
    - 建造消耗:-1000金钱,-400木材,-400石材,-100铜,-100铁
    - 效果:+20生产力
    - 科学水平≥50，额外+10生产力
  - 兵工厂MilitaryFactory
    - 初始上限:3
    - 解锁条件:生产力≥300
    - 建造消耗:-2000金钱,-800木材,-800石材,-200铜,-200铁
    - 效果:+30生产力,+10军事力量
  - 火力发电站ThermalPowerPlant
    - 初始上限:5
    - 解锁条件:生产力≥500
    - 建造消耗:-5000金钱,-2000木材,-2000石材,-500铜,-500铁
    - 效果:+50生产力,距离≤6的单元格+100电力，距离≤3的单元格污染指数+50
    - 科学水平≥100，额外+20生产力
  - 核电站NuclearPowerPlant
    - 初始上限:1
    - 解锁条件:生产力≥500
    - 建造消耗:-5000金钱,-2000木材,-2000石材,-500铜,-500铁
    - 效果:+100生产力,距离≤6的单元格+200电力
    - 科学水平≥300，额外+100生产力
- 娱乐区建筑
  - 剧院Theater
    - 初始上限:5
    - 解锁条件:无
    - 建造消耗:-100金钱,-50木材,-50石材
    - 效果:+10文化水平
  - 动物园Zoo
    - 初始上限:3
    - 解锁条件:文化水平≥50、科技水平≥50
    - 建造消耗:-500金钱,-200木材,-200石材
    - 效果:+20文化水平，+10幸福指数
  - 体育场Stadium
    - 初始上限:2
    - 解锁条件:文化水平≥100、生产力水平≥200
    - 建造消耗:-1000金钱,-400木材,-400石材,-100铜,-100铁
    - 效果:+20文化水平，+30幸福指数
  - 博物馆Museum
    - 初始上限:1
    - 解锁条件:文化水平≥300、生产力水平≥100
    - 建造消耗:-2000金钱,-800木材,-800石材,-200铜,-200铁
    - 效果:+30文化水平，距离≤1的单元格+50幸福指数，剧院上限+3
  - 游乐园AmusementPark
    - 初始上限:1
    - 解锁条件:文化水平≥500、生产力水平≥300、单元格电力≥100
    - 建造消耗:-5000金钱,-2000木材,-2000石材,-500铜,-500铁
    - 效果:+50文化水平,距离≤1的单元格+100幸福指数
  - 自然公园NaturalPark
    - 初始上限:1
    - 解锁条件:文化水平≥200、科学水平≥300、生产力水平≥300
    - 建造消耗:-5000金钱,-2000木材,-2000石材,-500铜,-500铁
    - 效果:+20文化水平,距离≤2的单元格+100幸福指数，距离≤6的单元格-50污染指数，动物园上限+3，游乐园上限+1
- 军事区建筑
  - 马厩Stable
    - 初始上限:5
    - 解锁条件:无
    - 建造消耗:-100金钱,-50木材,-50石材
    - 效果:+5军事力量
  - 兵营Barrack
    - 初始上限:3
    - 解锁条件:军事力量≥50
    - 建造消耗:-500金钱,-200木材,-200石材
    - 效果:+10军事力量
  - 机库Hangar
    - 初始上限:2
    - 解锁条件:军事力量≥100，生产力水平≥300
    - 建造消耗:-1000金钱,-400木材,-400石材,-100铜,-100铁
    - 效果:+20军事力量
  - 军事基地MilitaryBase
    - 初始上限:1
    - 解锁条件:军事力量≥300，生产力水平≥300，单元格电力≥100
    - 建造消耗:-2000金钱,-800木材,-800石材,-200铜,-200铁
    - 效果:+50军事力量，兵营上限+3，机库上限+2
